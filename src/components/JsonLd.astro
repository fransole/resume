---
import { SITE_TITLE, SITE_DESCRIPTION } from '../config';

export interface Props {
  type: 'WebSite' | 'Person' | 'Article' | 'BreadcrumbList';
  data?: Record<string, unknown>;
}

const { type, data = {} } = Astro.props;
const siteUrl = Astro.site?.toString() || 'https://johndorion.com';

// Base schemas
const schemas: Record<string, Record<string, unknown>> = {
  WebSite: {
    '@context': 'https://schema.org',
    '@type': 'WebSite',
    name: SITE_TITLE,
    url: siteUrl,
    description: SITE_DESCRIPTION,
  },
  Person: {
    '@context': 'https://schema.org',
    '@type': 'Person',
    name: 'John Dorion',
    url: siteUrl,
    jobTitle: 'Consulting Engineer & Cybersecurity Enthusiast',
    description: SITE_DESCRIPTION,
    sameAs: [
      'https://www.linkedin.com/in/john-dorion',
      'https://github.com/fransole'
    ],
  },
  Article: {
    '@context': 'https://schema.org',
    '@type': 'Article',
    author: {
      '@type': 'Person',
      name: 'John Dorion',
      url: siteUrl,
    },
    publisher: {
      '@type': 'Person',
      name: 'John Dorion',
      url: siteUrl,
    },
  },
  BreadcrumbList: {
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
  },
};

const schema = { ...schemas[type], ...data };
---

<script type="application/ld+json">
  {JSON.stringify(schema)}
</script>
