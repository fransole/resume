---
import SideBarFooter from "./SideBarFooter.astro";
import { Image } from "astro:assets";
import SideBarMenu from "./SideBarMenu.astro";
const { sideBarActiveItemID } = Astro.props;
---

<div class="drawer-side z-40">
  <label for="my-drawer" class="drawer-overlay"></label>
  <aside class="px-2 pt-2 h-auto min-h-full w-[19rem] bg-base-200 text-base-content flex flex-col relative">
    <div id="logo-playground"></div>
    <div class="w-fit mx-auto mt-5 mb-6 relative z-10">
      <a href="/">
        <div class="avatar transition ease-in-out hover:scale-[102%] block m-auto">
          <div class="w-[8.5rem]">
            <Image class="mask mask-circle" format="webp" width={300} height={300} src="/john-dorion.jpg" alt="John Dorion" />
          </div>
        </div>
      </a>
    </div>
    <div class="relative z-10">
      <SideBarMenu sideBarActiveItemID={sideBarActiveItemID} />
    </div>
    <div class="flex-grow"></div>
    <div class="relative z-10">
      <SideBarFooter />
    </div>
  </aside>
</div>

<style>
  #logo-playground {
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: 0;
    pointer-events: auto;
  }

  #logo-playground :global(.logo-particle) {
    position: absolute;
    pointer-events: auto;
    will-change: transform, opacity, filter;
    cursor: default;
    transition: filter 0.3s ease;
  }

  #logo-playground :global(.logo-particle:hover) {
    filter: drop-shadow(0 0 8px rgba(192, 163, 110, 0.6));
  }

  #logo-playground :global(.logo-particle path) {
    fill: #C0A36E;
    fill-rule: evenodd;
  }
</style>

<script>
  function initLogoAnimation() {
    const playground = document.getElementById('logo-playground');
    if (!playground || playground.dataset.initialized) return;
    playground.dataset.initialized = 'true';

    const PARTICLE_COUNT = 8;

    interface Particle {
      el: SVGSVGElement;
      x: number;
      y: number;
      baseX: number;
      size: number;
      baseOpacity: number;
      riseSpeed: number;
      driftAmplitude: number;
      driftFrequency: number;
      phase: number;
      rotation: number;
      rotationSpeed: number;
    }

    const particles: Particle[] = [];

    // Full logo paths from logo.svg
    const mainPath = `M56.106,156.033c0,-35.468 20.862,-93.125 34.214,-109.094c13.029,-15.583 46.9,-14.363 61.263,0c95.023,95.023 34.214,73.626 34.214,109.094c0,35.467 -29.056,64.263 -64.846,64.263c-35.789,0 -64.845,-28.796 -64.845,-64.263Zm94.953,-69.717c3.355,0 6.079,2.724 6.079,6.079c0,3.355 -2.724,6.079 -6.079,6.079c-3.355,0 -6.079,-2.724 -6.079,-6.079c0,-3.355 2.724,-6.079 6.079,-6.079Zm-30.396,-48.585c13.421,0 24.317,3.632 24.317,8.106c0,4.473 -10.896,8.105 -24.317,8.105c-13.421,0 -24.318,-3.632 -24.318,-8.105c0,-4.474 10.897,-8.106 24.318,-8.106Z`;
    const handlePath = `M78.176,64.403l0.032,0.033l-0.086,-0.088l0.032,0.032l-0.088,-0.088l0.032,0.031l-0.089,-0.088l0.031,0.031l-0.091,-0.088l0.032,0.03l-0.093,-0.088l0.031,0.029l-0.094,-0.088l0.031,0.028l-0.095,-0.087l0.03,0.027l-0.097,-0.087l0.03,0.027l-0.098,-0.088l0.03,0.026l-0.1,-0.087l0.03,0.026l-0.101,-0.087l0.029,0.025l-0.102,-0.087l0.029,0.024l-0.104,-0.087l0.029,0.024l-0.105,-0.086l0.029,0.023l-0.107,-0.086l0.029,0.022l-0.108,-0.086l0.028,0.023l-0.109,-0.086l0.028,0.021l-0.11,-0.085l0.028,0.021l-0.112,-0.085l0.027,0.021l-0.113,-0.086l0.028,0.021l-0.114,-0.085l0.027,0.02l-0.116,-0.085l0.028,0.02l-0.117,-0.084l0.027,0.019l-0.118,-0.084l0.027,0.019l-0.12,-0.084l0.027,0.019l-0.121,-0.084l0.027,0.018l-0.048,-0.033l-0.074,-0.05l0.027,0.018l-0.123,-0.083l0.027,0.018l-0.124,-0.083l0.026,0.017l-0.125,-0.082l0.026,0.017l-0.126,-0.082l0.026,0.016l-0.127,-0.081l0.026,0.016l-0.128,-0.081l0.025,0.016l-0.129,-0.081l0.026,0.016l-0.131,-0.08l0.026,0.015l-0.132,-0.079l0.026,0.015l-0.133,-0.08l0.026,0.015l-0.134,-0.079l0.026,0.015l-0.135,-0.078l0.026,0.014l-0.136,-0.078l0.025,0.014l-0.136,-0.077l0.025,0.014l-0.138,-0.077l0.026,0.014l-0.139,-0.077l0.026,0.014l-0.14,-0.076l0.025,0.013l-0.14,-0.076l0.025,0.014l-0.141,-0.075l0.025,0.013l-0.142,-0.075l0.025,0.013l-0.143,-0.074l0.025,0.013l-0.144,-0.074l0.025,0.013l-0.145,-0.073l0.025,0.012l-0.145,-0.072l0.025,0.012l-0.147,-0.071l0.025,0.012l-0.147,-0.071l0.025,0.012l-0.148,-0.071l0.025,0.012l-0.149,-0.07l0.026,0.011l-0.15,-0.069l0.025,0.012l-0.15,-0.069l0.025,0.011l-0.151,-0.067l0.025,0.011l-0.152,-0.068l0.026,0.011l-0.153,-0.066l0.026,0.011l-0.154,-0.066l0.026,0.01l-0.155,-0.065l0.026,0.011l-0.155,-0.065l0.026,0.011l-0.156,-0.064l0.026,0.01l-0.156,-0.063l0.026,0.01l-0.157,-0.062l0.026,0.01l-0.157,-0.062l0.026,0.01l-0.158,-0.061l0.026,0.01l-0.159,-0.06l0.027,0.01l-0.16,-0.059l0.027,0.009l-0.16,-0.058l0.027,0.009l-0.161,-0.058l0.027,0.009l-0.161,-0.056l0.027,0.009l-0.162,-0.056l0.027,0.008l-0.162,-0.055l0.027,0.009l-0.163,-0.054l0.028,0.008l-0.163,-0.053l0.027,0.008l-0.164,-0.052l0.028,0.008l-0.164,-0.051l0.028,0.008l-0.165,-0.051l0.028,0.008l-0.165,-0.05l0.028,0.008l-0.165,-0.049l0.028,0.008l-0.166,-0.048l0.029,0.007l-0.167,-0.047l0.029,0.008l-0.167,-0.046l0.029,0.007l-0.167,-0.045l0.029,0.007l-0.167,-0.044l0.029,0.007l-0.168,-0.044l0.029,0.007l-0.168,-0.042l0.03,0.007l-0.169,-0.042l0.03,0.007l-0.169,-0.04l0.031,0.006l-0.17,-0.039l0.031,0.006l-0.17,-0.038l0.031,0.006l-0.17,-0.037l0.031,0.006l-0.17,-0.037l0.031,0.006l-0.17,-0.035l0.031,0.006l-0.028,-0.006l-0.143,-0.028l0.032,0.005l-0.171,-0.033l0.032,0.006l-0.171,-0.032l0.032,0.005l-0.171,-0.03l0.032,0.005l-0.171,-0.03l0.032,0.005l-0.172,-0.029l0.033,0.005l-0.171,-0.027l0.033,0.004l-0.172,-0.026l0.033,0.004l-0.172,-0.025l0.034,0.004l-0.172,-0.023l0.033,0.003l-0.172,-0.022l0.034,0.003l-0.172,-0.021l0.035,0.003l-0.173,-0.02l0.035,0.003l-0.173,-0.019l0.035,0.003l-0.172,-0.018l0.035,0.003l-0.172,-0.017l0.035,0.003l-0.172,-0.015l0.036,0.002l-0.173,-0.014l0.036,0.002l-0.173,-0.013l0.037,0.001l-0.173,-0.011l0.037,0.001l-0.172,-0.01l0.037,0.001l-0.173,-0.009l0.038,0.001l-0.173,-0.007l0.038,0l-0.173,-0.006l0.038,0l-0.172,-0.005l0.038,0l-0.172,-0.004l0.039,0l-0.172,-0.002l0.039,-0.001l-0.172,-0.001l0.039,-0.001l-0.172,0.001l0.04,-0.002l-0.172,0.002l0.04,-0.002l-0.172,0.004l0.04,-0.003l-0.171,0.005l0.04,-0.002l-0.171,0.006l0.041,-0.003l-0.171,0.007l0.041,-0.003l-0.171,0.009l0.041,-0.004l-0.17,0.011l0.042,-0.004l-0.171,0.012l0.042,-0.005l-0.17,0.014l0.042,-0.005l-0.17,0.015l0.043,-0.006l-0.17,0.017l0.043,-0.006l-0.169,0.018l0.043,-0.006l-0.169,0.019l0.043,-0.007l-0.169,0.021l0.044,-0.007l-0.169,0.023l0.045,-0.008l-0.169,0.024l0.045,-0.008l-0.168,0.025l0.045,-0.008l-0.168,0.027l0.045,-0.009l-0.168,0.029l0.046,-0.01l-0.167,0.03l0.045,-0.01l-0.166,0.032l0.045,-0.011l-0.166,0.034l0.046,-0.011l-0.166,0.035l0.046,-0.012l-0.165,0.037l0.046,-0.013l-0.165,0.039l0.047,-0.013l-0.165,0.04l0.047,-0.013l-0.164,0.042l0.047,-0.015l-0.164,0.044l0.047,-0.015l-0.163,0.046l0.047,-0.016l-0.162,0.047l0.047,-0.016l-0.162,0.049l0.047,-0.017l-0.162,0.051l0.048,-0.018l-0.161,0.053l0.048,-0.018l-0.161,0.054l0.048,-0.019l-0.161,0.056l0.048,-0.019l-0.16,0.057l0.048,-0.02l-0.159,0.06l0.048,-0.021l-0.159,0.061l0.048,-0.021l-0.158,0.063l0.048,-0.022l-0.157,0.065l0.048,-0.022l-0.157,0.066l0.048,-0.023l-0.157,0.069l0.048,-0.024l-0.156,0.07l0.048,-0.024l-0.155,0.072l0.048,-0.025l-0.155,0.074l0.047,-0.026l-0.153,0.077l0.047,-0.027l-0.153,0.078l0.047,-0.027l-0.152,0.08l0.046,-0.028l-0.151,0.082l0.046,-0.029l-0.151,0.084l0.046,-0.029l-0.15,0.086l0.046,-0.03l-0.149,0.088l0.045,-0.03l-0.148,0.09l0.045,-0.031l-0.148,0.092l0.045,-0.032l-0.147,0.094l0.044,-0.032l-0.146,0.096l0.044,-0.033l-0.022,0.015l-0.122,0.085l0.043,-0.033l-0.143,0.101l0.043,-0.033l-0.142,0.104l0.042,-0.035l-0.141,0.106l0.042,-0.035l-0.141,0.109l0.042,-0.036l-0.14,0.111l0.042,-0.036l-0.139,0.112l0.041,-0.036l-0.138,0.114l0.04,-0.037l-0.137,0.117l0.04,-0.037l-0.136,0.119l0.039,-0.038l-0.135,0.121l0.038,-0.038l-0.134,0.123l0.038,-0.038l-0.133,0.125l0.037,-0.039l-0.132,0.128l0.037,-0.039l-0.132,0.13l0.036,-0.04l-0.13,0.132l0.036,-0.039l-0.13,0.134l0.035,-0.04l-0.128,0.137l0.034,-0.041l-0.127,0.139l0.033,-0.04l-0.126,0.141l0.033,-0.041l-0.125,0.144l0.032,-0.041l-0.124,0.146l0.031,-0.041l-0.123,0.148l0.031,-0.041l-0.122,0.15l0.03,-0.041l-0.121,0.153l0.03,-0.042l-0.12,0.156l0.029,-0.042l-0.119,0.158l0.028,-0.042l-0.117,0.16l0.023,-0.035l-0.126,0.175l0.019,-0.029l-0.125,0.177l0.018,-0.029l-0.125,0.18l0.018,-0.029l-0.124,0.183l0.017,-0.029l-0.124,0.185l0.017,-0.029l-0.124,0.187l0.017,-0.028l-0.123,0.19l0.016,-0.028l-0.123,0.192l0.016,-0.028l-0.122,0.195l0.015,-0.028l-0.121,0.197l0.014,-0.027l-0.121,0.2l0.015,-0.028l-0.121,0.203l0.014,-0.027l-0.12,0.204l0.014,-0.026l-0.12,0.207l0.013,-0.027l-0.013,0.023l-0.103,0.189l0.013,-0.026l-0.115,0.214l0.015,-0.03l-0.06,0.114l0.016,-0.033l-0.06,0.116l0.016,-0.033l-0.059,0.117l0.014,-0.032l-0.058,0.118l0.014,-0.032l-0.058,0.121l0.014,-0.031l-0.057,0.121l0.013,-0.03l-0.057,0.123l0.012,-0.03l-0.056,0.124l0.012,-0.029l-0.055,0.126l0.011,-0.029l-0.055,0.128l0.011,-0.029l-0.054,0.129l0.01,-0.028l-0.054,0.131l0.01,-0.028l-0.053,0.132l0.01,-0.027l-0.053,0.134l0.009,-0.027l-0.052,0.135l0.009,-0.026l-0.051,0.137l0.008,-0.026l-0.051,0.138l0.008,-0.025l-0.05,0.139l0.007,-0.025l-0.05,0.141l0.008,-0.024l-0.05,0.142l0.007,-0.024l-0.048,0.143l0.006,-0.023l-0.048,0.145l0.007,-0.023l-0.048,0.146l0.006,-0.022l-0.047,0.147l0.006,-0.022l-0.047,0.149l0.006,-0.021l-0.046,0.15l0.005,-0.021l-0.046,0.151l0.006,-0.021l-0.045,0.153l0.005,-0.02l-0.045,0.154l0.005,-0.02l-0.044,0.156l0.004,-0.02l-0.043,0.157l0.004,-0.019l-0.043,0.158l0.004,-0.019l-0.043,0.159l0.005,-0.018l-0.043,0.161l0.004,-0.019l-0.041,0.162l0.003,-0.017l-0.041,0.163l0.004,-0.018l-0.041,0.165l0.004,-0.017l-0.041,0.166l0.004,-0.017l-0.04,0.167l0.003,-0.017l-0.039,0.169l0.003,-0.016l-0.039,0.169l0.003,-0.016l-0.038,0.171l0.003,-0.016l-0.038,0.173l0.003,-0.016l-0.038,0.174l0.004,-0.023l-0.073,0.351l0.005,-0.03l-0.072,0.356l0.005,-0.029l-0.07,0.361l0.004,-0.028l-0.067,0.365l0.003,-0.026l-0.066,0.37l0.004,-0.026l-0.002,0.008l-0.055,0.368l0.003,-0.025l-0.055,0.38l0.003,-0.024l-0.052,0.384l0.002,-0.023l-0.051,0.389l0.003,-0.022l-0.049,0.393l0.002,-0.021l-0.047,0.397l0.002,-0.021l-0.045,0.402l0.002,-0.02l-0.043,0.406l0.001,-0.02l-0.041,0.41l0.001,-0.019l-0.039,0.415l0.001,-0.019l-0.038,0.419l0.001,-0.018l-0.036,0.422l0.001,-0.017l-0.034,0.426l0.001,-0.017l-0.032,0.431l0,-0.017l-0.03,0.435l0,-0.016l-0.029,0.438l0.001,-0.016l-0.027,0.442l0,-0.015l-0.026,0.445l0.001,-0.014l-0.024,0.449l0,-0.014l-0.022,0.453l0,-0.014l-0.021,0.456l0,-0.013l-0.019,0.459l0,-0.013l-0.018,0.464l0,-0.013l-0.016,0.466l0,-0.012l-0.014,0.47l0,-0.012l-0.014,0.473l0,-0.011l-0.004,0.179l-0.004,0.297l-0.001,-0.011l-0.005,0.479l0,-0.011l-0.004,0.482l0,-0.01l-0.002,0.485l0,-0.01l-0.001,0.488l0,-0.01l0,0.491l0,-0.01l0.002,0.495l0,-0.01l0.004,0.497l-0.001,-0.009l0.005,0.5l0,-0.01l0.006,0.503l0,-0.009l0.008,0.505l0,-0.009l0.009,0.508l-0.001,-0.008l0.011,0.51l0,-0.008l0.012,0.513l-0.001,-0.009l0.014,0.516l-0.001,-0.008l0.015,0.517l-0.001,-0.007l0.016,0.52l0,-0.008l0.017,0.522l-0.001,-0.007l0.019,0.524l-0.001,-0.007l0.02,0.527l0,-0.007l0.02,0.529l0,-0.007l0.022,0.531l0,-0.007l0.023,0.533l-0.001,-0.007l0.025,0.535l-0.001,-0.007l0.026,0.537l-0.001,-0.006l0.027,0.538l0,-0.006l0.027,0.541l0,-0.006l0.029,0.542l-0.001,-0.006l0.015,0.265l0.017,0.278l-0.001,-0.005l0.035,0.545l0,-0.006l0.035,0.547l0,-0.006l0.036,0.549l0,-0.006l0.038,0.55l-0.001,-0.005l0.039,0.551l-0.001,-0.006l0.04,0.553l0,-0.005l0.041,0.553l-0.001,-0.005l0.042,0.555l0,-0.005l0.042,0.557l0,-0.005l0.044,0.557l-0.001,-0.005l0.045,0.559l-0.001,-0.005l0.046,0.559l0,-0.004l0.046,0.56l0,-0.004l0.047,0.561l0,-0.004l0.048,0.562l0,-0.004l0.049,0.563l-0.001,-0.005l0.051,0.564l-0.001,-0.004l0.051,0.564l0,-0.004l0.051,0.565l0,-0.004l0.052,0.566l0,-0.004l0.053,0.566l0,-0.003l0.054,0.566l-0.001,-0.004l0.055,0.567l0,-0.003l0.055,0.567l0,-0.003l0.056,0.567l0,-0.003l0.057,0.568l-0.001,-0.005l0.116,1.136l-0.001,-0.006l0.013,0.121l0.11,1.015l0,-0.006l0.126,1.136l-0.001,-0.006l0.129,1.136l-0.001,-0.006l0.132,1.134l-0.001,-0.005l0.133,1.133l-0.001,-0.005l0.136,1.131l-0.001,-0.005l0.138,1.129l-0.001,-0.005l0.139,1.127l0,-0.005l0.141,1.124l-0.001,-0.005l0.143,1.12l-0.001,-0.004l0.144,1.115l-0.001,-0.004l0.146,1.112l-0.001,-0.004l0.147,1.106l-0.001,-0.004l0.148,1.102l-0.001,-0.004l0.09,0.66l0.061,0.435l0,-0.004l0.155,1.089l-0.001,-0.004l0.156,1.083l-0.001,-0.004l0.157,1.075l-0.001,-0.003l0.157,1.067l-0.001,-0.003l0.158,1.059l-0.001,-0.003l0.158,1.052l0,-0.004l0.158,1.043l-0.001,-0.003l0.158,1.033l0,-0.003l0.158,1.024l-0.001,-0.003l0.158,1.014l-0.001,-0.003l0.158,1.003l-0.001,-0.003l0.157,0.992l0,-0.003l0.157,0.981l-0.001,-0.002l0.156,0.968l0,-0.002l0.155,0.956l-0.001,-0.002l0.154,0.944l0,-0.003l0.153,0.931l0,-0.002l0.152,0.917l-0.001,-0.003l0.151,0.903l0,-0.002l0.149,0.889l0,-0.002l0.148,0.873l-0.001,-0.002l0.146,0.858l0,-0.001l0.144,0.842l0,-0.002l0.142,0.826l0,-0.001l0.141,0.809l-0.001,-0.002l0.139,0.793l-0.001,-0.002l0.136,0.775l0,-0.001l0.134,0.757l-0.001,-0.003l0.1,0.56l0.163,0.898l0,-0.003l0.254,1.38l-0.001,-0.003l0.242,1.3l-0.001,-0.003l0.229,1.216l-0.001,-0.003l0.214,1.129l0,-0.003l0.198,1.037l-0.001,-0.002l0.182,0.943l0,-0.002l0.164,0.845l0,-0.003l0.145,0.744l0,-0.002l0.126,0.639l0,-0.002l0.105,0.53l0,-0.003l0.145,0.723l-0.001,-0.004l0.052,0.257l-0.214,1.124l-0.921,0.654l-0.02,0.004l-1.11,-0.209l-0.665,-0.931l-0.002,-0.01l-0.058,-0.245l-0.001,-0.003l-0.167,-0.717l0,-0.003l-0.122,-0.527l-0.001,-0.002l-0.145,-0.635l-0.001,-0.002l-0.168,-0.739l0,-0.002l-0.19,-0.84l-0.001,-0.002l-0.21,-0.937l-0.001,-0.003l-0.23,-1.031l0,-0.002l-0.248,-1.122l-0.001,-0.002l-0.265,-1.209l-0.001,-0.002l-0.281,-1.292l0,-0.003l-0.296,-1.372l-0.001,-0.003l-0.19,-0.892l-0.122,-0.556l0,-0.003l-0.163,-0.751l0,-0.002l-0.166,-0.769l0,-0.001l-0.169,-0.787l0,-0.002l-0.171,-0.803l-0.001,-0.002l-0.174,-0.82l0,-0.002l-0.176,-0.837l-0.001,-0.001l-0.178,-0.853l-0.001,-0.001l-0.181,-0.868l0,-0.002l-0.183,-0.882l0,-0.002l-0.185,-0.897l-0.001,-0.002l-0.186,-0.91l-0.001,-0.002l-0.188,-0.925l0,-0.002l-0.19,-0.937l0,-0.002l-0.191,-0.95l0,-0.003l-0.192,-0.962l-0.001,-0.002l-0.193,-0.974l0,-0.003l-0.194,-0.985l0,-0.003l-0.195,-0.996l0,-0.003l-0.195,-1.007l-0.001,-0.003l-0.195,-1.017l-0.001,-0.003l-0.196,-1.027l0,-0.002l-0.196,-1.036l0,-0.004l-0.196,-1.044l-0.001,-0.004l-0.195,-1.053l-0.001,-0.003l-0.195,-1.061l-0.001,-0.004l-0.194,-1.068l-0.001,-0.004l-0.194,-1.076l-0.001,-0.003l-0.193,-1.083l0,-0.004l-0.077,-0.433l-0.119,-0.655l-0.001,-0.004l-0.196,-1.093l-0.001,-0.004l-0.195,-1.1l0,-0.004l-0.194,-1.104l-0.001,-0.004l-0.192,-1.109l-0.001,-0.004l-0.19,-1.113l-0.001,-0.005l-0.188,-1.116l-0.001,-0.005l-0.186,-1.12l-0.001,-0.005l-0.184,-1.122l-0.001,-0.005l-0.182,-1.125l0,-0.006l-0.18,-1.127l-0.001,-0.005l-0.176,-1.129l-0.001,-0.005l-0.174,-1.13l-0.001,-0.006l-0.171,-1.13l-0.001,-0.006l-0.15,-1.01l-0.018,-0.121l-0.001,-0.006l-0.17,-1.13l0,-0.004l-0.084,-0.565l-0.001,-0.003l-0.082,-0.565l-0.001,-0.003l-0.082,-0.564l0,-0.004l-0.081,-0.564l0,-0.003l-0.08,-0.564l-0.001,-0.004l-0.079,-0.563l0,-0.003l-0.078,-0.563l-0.001,-0.004l-0.077,-0.562l0,-0.004l-0.077,-0.561l0,-0.004l-0.075,-0.561l-0.001,-0.004l-0.074,-0.56l0,-0.004l-0.073,-0.56l0,-0.004l-0.072,-0.559l-0.001,-0.004l-0.071,-0.558l0,-0.004l-0.07,-0.557l0,-0.004l-0.069,-0.556l0,-0.005l-0.068,-0.555l0,-0.004l-0.066,-0.554l-0.001,-0.005l-0.065,-0.553l0,-0.004l-0.064,-0.552l-0.001,-0.005l-0.062,-0.55l-0.001,-0.005l-0.061,-0.549l-0.001,-0.005l-0.06,-0.548l0,-0.005l-0.059,-0.547l-0.001,-0.005l-0.057,-0.545l-0.001,-0.005l-0.056,-0.544l-0.001,-0.005l-0.028,-0.278l-0.028,-0.264l-0.001,-0.006l-0.057,-0.54l0,-0.006l-0.056,-0.538l-0.001,-0.006l-0.054,-0.536l0,-0.006l-0.053,-0.535l-0.001,-0.007l-0.051,-0.532l0,-0.007l-0.05,-0.531l-0.001,-0.007l-0.048,-0.529l-0.001,-0.007l-0.047,-0.527l0,-0.007l-0.045,-0.525l-0.001,-0.007l-0.044,-0.523l0,-0.007l-0.042,-0.521l-0.001,-0.008l-0.041,-0.518l0,-0.008l-0.039,-0.516l-0.001,-0.008l-0.037,-0.514l0,-0.008l-0.036,-0.512l-0.001,-0.008l-0.034,-0.51l0,-0.008l-0.033,-0.507l0,-0.009l-0.031,-0.504l-0.001,-0.009l-0.029,-0.502l0,-0.009l-0.028,-0.499l0,-0.009l-0.026,-0.497l-0.001,-0.009l-0.024,-0.494l0,-0.01l-0.022,-0.491l-0.001,-0.01l-0.02,-0.488l-0.001,-0.01l-0.018,-0.485l-0.001,-0.011l-0.017,-0.482l0,-0.011l-0.015,-0.479l0,-0.011l-0.009,-0.297l-0.007,-0.18l0,-0.011l-0.016,-0.473l0,-0.012l-0.014,-0.47l0,-0.012l-0.013,-0.466l0,-0.013l-0.01,-0.463l0,-0.013l-0.009,-0.46l0.001,-0.013l-0.007,-0.457l0,-0.014l-0.004,-0.453l0,-0.014l-0.002,-0.45l0,-0.014l0,-0.446l0,-0.015l0.002,-0.443l0.001,-0.015l0.003,-0.439l0.001,-0.016l0.006,-0.435l0.001,-0.016l0.008,-0.432l0.001,-0.017l0.01,-0.427l0.001,-0.018l0.012,-0.423l0.001,-0.018l0.014,-0.42l0.002,-0.018l0.016,-0.416l0.001,-0.019l0.019,-0.412l0.002,-0.02l0.021,-0.407l0.001,-0.021l0.023,-0.403l0.002,-0.021l0.026,-0.399l0.002,-0.022l0.027,-0.395l0.003,-0.022l0.029,-0.391l0.003,-0.023l0.032,-0.387l0.003,-0.024l0.034,-0.382l0.003,-0.024l0.036,-0.37l0.001,-0.008l0.003,-0.025l0.032,-0.374l0.003,-0.026l0.034,-0.37l0.004,-0.027l0.037,-0.365l0.004,-0.028l0.039,-0.361l0.005,-0.029l0.042,-0.356l0.004,-0.022l0.021,-0.176l0.003,-0.016l0.023,-0.174l0.002,-0.016l0.024,-0.174l0.002,-0.016l0.024,-0.172l0.003,-0.017l0.025,-0.171l0.003,-0.016l0.025,-0.17l0.003,-0.017l0.026,-0.169l0.004,-0.017l0.026,-0.168l0.004,-0.017l0.027,-0.166l0.003,-0.018l0.028,-0.165l0.004,-0.019l0.028,-0.163l0.004,-0.019l0.03,-0.162l0.004,-0.019l0.03,-0.161l0.004,-0.02l0.03,-0.16l0.005,-0.019l0.031,-0.159l0.005,-0.02l0.032,-0.157l0.005,-0.02l0.032,-0.157l0.005,-0.02l0.033,-0.155l0.006,-0.021l0.034,-0.154l0.005,-0.021l0.035,-0.152l0.006,-0.022l0.035,-0.151l0.006,-0.022l0.036,-0.15l0.006,-0.023l0.037,-0.148l0.007,-0.023l0.037,-0.147l0.007,-0.023l0.038,-0.146l0.007,-0.024l0.039,-0.144l0.007,-0.024l0.04,-0.143l0.008,-0.025l0.039,-0.142l0.009,-0.025l0.04,-0.14l0.009,-0.026l0.042,-0.139l0.009,-0.026l0.042,-0.137l0.009,-0.027l0.043,-0.136l0.01,-0.027l0.043,-0.135l0.011,-0.028l0.044,-0.133l0.01,-0.028l0.045,-0.132l0.012,-0.029l0.045,-0.13l0.012,-0.029l0.046,-0.129l0.012,-0.03l0.047,-0.127l0.013,-0.031l0.048,-0.126l0.013,-0.031l0.048,-0.124l0.014,-0.032l0.049,-0.123l0.015,-0.032l0.05,-0.122l0.015,-0.033l0.05,-0.12l0.016,-0.033l0.051,-0.119l0.015,-0.03l0.098,-0.222l0.013,-0.027l0.089,-0.196l0.01,-0.024l0.013,-0.026l0.097,-0.22l0.014,-0.026l0.097,-0.217l0.014,-0.027l0.099,-0.214l0.014,-0.027l0.1,-0.212l0.014,-0.027l0.101,-0.209l0.015,-0.028l0.101,-0.206l0.016,-0.028l0.102,-0.204l0.016,-0.028l0.103,-0.202l0.017,-0.028l0.103,-0.199l0.017,-0.028l0.105,-0.197l0.017,-0.028l0.106,-0.194l0.018,-0.029l0.106,-0.191l0.018,-0.029l0.108,-0.189l0.018,-0.029l0.108,-0.187l0.024,-0.035l0.101,-0.171l0.028,-0.042l0.103,-0.168l0.028,-0.042l0.105,-0.166l0.029,-0.041l0.106,-0.164l0.03,-0.041l0.107,-0.162l0.031,-0.041l0.108,-0.159l0.032,-0.041l0.11,-0.157l0.032,-0.041l0.111,-0.155l0.033,-0.041l0.113,-0.152l0.034,-0.04l0.114,-0.15l0.034,-0.041l0.116,-0.147l0.034,-0.041l0.117,-0.145l0.036,-0.04l0.118,-0.143l0.036,-0.04l0.12,-0.141l0.036,-0.039l0.121,-0.139l0.038,-0.039l0.122,-0.137l0.038,-0.038l0.123,-0.135l0.039,-0.038l0.124,-0.132l0.039,-0.038l0.126,-0.13l0.04,-0.037l0.127,-0.128l0.04,-0.037l0.128,-0.126l0.041,-0.036l0.129,-0.124l0.041,-0.036l0.131,-0.121l0.042,-0.036l0.131,-0.119l0.043,-0.035l0.132,-0.117l0.043,-0.035l0.134,-0.115l0.043,-0.034l0.135,-0.113l0.044,-0.033l0.115,-0.094l0.02,-0.017l0.044,-0.033l0.136,-0.111l0.044,-0.032l0.137,-0.109l0.045,-0.031l0.138,-0.107l0.045,-0.031l0.139,-0.104l0.045,-0.031l0.14,-0.102l0.046,-0.03l0.141,-0.1l0.046,-0.03l0.142,-0.098l0.046,-0.028l0.143,-0.097l0.047,-0.028l0.144,-0.094l0.047,-0.027l0.144,-0.093l0.047,-0.026l0.146,-0.091l0.047,-0.026l0.147,-0.088l0.047,-0.025l0.148,-0.087l0.047,-0.024l0.149,-0.085l0.048,-0.024l0.149,-0.082l0.048,-0.023l0.15,-0.081l0.048,-0.023l0.151,-0.078l0.047,-0.022l0.152,-0.077l0.048,-0.021l0.153,-0.075l0.048,-0.021l0.153,-0.073l0.048,-0.02l0.154,-0.071l0.048,-0.019l0.155,-0.069l0.048,-0.019l0.156,-0.067l0.047,-0.018l0.157,-0.065l0.048,-0.018l0.157,-0.063l0.047,-0.017l0.158,-0.062l0.048,-0.016l0.158,-0.06l0.047,-0.015l0.16,-0.058l0.047,-0.015l0.16,-0.057l0.047,-0.014l0.16,-0.054l0.047,-0.014l0.161,-0.053l0.047,-0.013l0.162,-0.051l0.046,-0.012l0.162,-0.05l0.047,-0.012l0.162,-0.047l0.047,-0.011l0.163,-0.046l0.046,-0.011l0.164,-0.044l0.045,-0.01l0.165,-0.042l0.045,-0.01l0.165,-0.041l0.045,-0.009l0.166,-0.039l0.045,-0.008l0.166,-0.038l0.044,-0.008l0.167,-0.035l0.044,-0.008l0.167,-0.034l0.044,-0.007l0.167,-0.032l0.044,-0.007l0.168,-0.03l0.043,-0.007l0.168,-0.029l0.043,-0.005l0.169,-0.028l0.043,-0.005l0.168,-0.026l0.043,-0.005l0.169,-0.024l0.042,-0.004l0.17,-0.023l0.042,-0.004l0.17,-0.021l0.041,-0.003l0.171,-0.02l0.041,-0.003l0.17,-0.018l0.041,-0.002l0.171,-0.017l0.041,-0.002l0.171,-0.015l0.04,-0.002l0.171,-0.013l0.04,-0.002l0.172,-0.012l0.039,-0.001l0.172,-0.01l0.04,-0.001l0.171,-0.009l0.04,-0.001l0.172,-0.007l0.038,0l0.173,-0.006l0.038,0l0.172,-0.005l0.039,0.001l0.172,-0.003l0.038,0l0.173,-0.001l0.037,0.001l0.173,0l0.037,0.001l0.173,0.001l0.037,0.002l0.173,0.002l0.036,0.002l0.173,0.004l0.037,0.002l0.173,0.006l0.036,0.002l0.173,0.007l0.035,0.002l0.173,0.009l0.036,0.002l0.173,0.01l0.035,0.003l0.173,0.011l0.035,0.003l0.173,0.012l0.034,0.004l0.174,0.013l0.034,0.004l0.173,0.015l0.034,0.004l0.173,0.016l0.033,0.004l0.173,0.017l0.033,0.005l0.173,0.018l0.033,0.005l0.173,0.02l0.033,0.004l0.172,0.022l0.033,0.004l0.172,0.023l0.033,0.005l0.172,0.023l0.032,0.006l0.172,0.025l0.032,0.005l0.172,0.026l0.031,0.006l0.143,0.022l0.029,0.005l0.031,0.005l0.172,0.029l0.031,0.006l0.171,0.029l0.031,0.006l0.171,0.031l0.031,0.006l0.17,0.031l0.031,0.007l0.17,0.033l0.03,0.006l0.171,0.034l0.03,0.007l0.17,0.035l0.029,0.007l0.17,0.036l0.029,0.007l0.17,0.037l0.029,0.007l0.169,0.038l0.029,0.008l0.169,0.039l0.029,0.007l0.168,0.041l0.029,0.007l0.168,0.042l0.028,0.007l0.168,0.043l0.028,0.008l0.167,0.043l0.028,0.008l0.167,0.045l0.028,0.008l0.166,0.045l0.028,0.009l0.166,0.046l0.028,0.008l0.165,0.048l0.027,0.008l0.165,0.049l0.028,0.008l0.164,0.05l0.027,0.009l0.164,0.05l0.027,0.009l0.163,0.051l0.027,0.009l0.163,0.052l0.027,0.009l0.162,0.053l0.027,0.01l0.161,0.054l0.027,0.009l0.161,0.055l0.026,0.009l0.161,0.056l0.026,0.01l0.16,0.056l0.026,0.01l0.16,0.057l0.026,0.01l0.158,0.059l0.026,0.01l0.158,0.059l0.026,0.01l0.157,0.06l0.026,0.01l0.157,0.061l0.026,0.01l0.156,0.061l0.025,0.011l0.155,0.062l0.026,0.011l0.155,0.063l0.025,0.011l0.154,0.064l0.025,0.011l0.153,0.064l0.026,0.011l0.152,0.065l0.025,0.012l0.152,0.066l0.025,0.011l0.151,0.067l0.025,0.011l0.15,0.068l0.025,0.011l0.149,0.068l0.026,0.012l0.148,0.069l0.025,0.012l0.147,0.069l0.026,0.013l0.146,0.069l0.025,0.013l0.146,0.07l0.025,0.013l0.145,0.071l0.025,0.013l0.144,0.072l0.025,0.013l0.143,0.072l0.025,0.013l0.142,0.073l0.025,0.014l0.141,0.073l0.025,0.014l0.14,0.074l0.026,0.014l0.139,0.074l0.025,0.014l0.138,0.076l0.026,0.014l0.137,0.075l0.025,0.015l0.136,0.076l0.026,0.015l0.135,0.076l0.025,0.015l0.134,0.078l0.026,0.015l0.133,0.077l0.025,0.016l0.132,0.078l0.026,0.016l0.131,0.078l0.026,0.016l0.129,0.079l0.026,0.016l0.129,0.08l0.026,0.016l0.127,0.08l0.027,0.017l0.126,0.08l0.026,0.017l0.125,0.081l0.027,0.017l0.124,0.082l0.026,0.017l0.074,0.049l0.049,0.033l0.026,0.018l0.122,0.082l0.027,0.018l0.12,0.083l0.027,0.019l0.119,0.082l0.027,0.019l0.118,0.083l0.027,0.02l0.116,0.083l0.028,0.02l0.115,0.084l0.028,0.02l0.114,0.084l0.028,0.021l0.112,0.084l0.028,0.022l0.112,0.084l0.028,0.022l0.11,0.084l0.028,0.023l0.109,0.085l0.029,0.022l0.107,0.086l0.029,0.023l0.106,0.085l0.029,0.024l0.104,0.086l0.03,0.024l0.103,0.086l0.029,0.025l0.102,0.086l0.03,0.025l0.101,0.086l0.03,0.026l0.099,0.087l0.03,0.027l0.098,0.086l0.03,0.028l0.096,0.086l0.031,0.028l0.095,0.087l0.031,0.029l0.093,0.087l0.031,0.03l0.092,0.087l0.122,0.117l0.121,0.119l0.119,0.119l0.118,0.121l0.117,0.121l0.116,0.123l0.114,0.123l0.034,0.037l0.079,0.088l0.034,0.038l0.078,0.087l0.035,0.04l0.076,0.087l0.034,0.041l0.075,0.087l0.036,0.044l0.071,0.086l0.036,0.043l0.071,0.088l0.035,0.044l0.069,0.088l0.036,0.046l0.068,0.087l0.036,0.048l0.066,0.087l0.036,0.05l0.064,0.087l0.037,0.051l0.062,0.087l0.037,0.052l0.061,0.087l0.037,0.055l0.059,0.087l0.037,0.056l0.057,0.087l0.038,0.058l0.055,0.086l0.038,0.06l0.053,0.087l0.038,0.062l0.051,0.086l0.038,0.065l0.05,0.086l0.038,0.067l0.048,0.086l0.037,0.069l0.046,0.085l0.038,0.072l0.044,0.085l0.037,0.074l0.043,0.086l0.036,0.076l0.029,0.061l0.012,0.024l0.036,0.08l0.039,0.085l0.036,0.082l0.036,0.085l0.036,0.084l0.034,0.085l0.035,0.088l0.033,0.084l0.034,0.091l0.031,0.084l0.033,0.094l0.028,0.084l0.032,0.097l0.027,0.083l0.031,0.101l0.024,0.083l0.03,0.103l0.022,0.083l0.028,0.107l0.021,0.082l0.026,0.111l0.018,0.082l0.025,0.114l0.016,0.081l0.022,0.117l0.014,0.082l0.02,0.12l0.012,0.081l0.017,0.124l0.01,0.08l0.015,0.127l0.008,0.08l0.011,0.13l0.006,0.08l0.008,0.133l0.003,0.079l0.005,0.136l0.001,0.079l0.001,0.138l0,0.078l-0.001,0.01l-0.41,1.928l-1.088,1.581l-1.599,1.061l-1.934,0.378l-0.02,0l-1.928,-0.411l-1.581,-1.087l-1.061,-1.599l-0.377,-1.928l0,0.005l0.002,0.056l0.003,0.054l0.005,0.05l0.005,0.047l0.006,0.043l0.006,0.04l0.007,0.035l0.007,0.032l0.006,0.029l0.007,0.024l0.006,0.021l0.005,0.017l0.005,0.014l0.002,0.008l0.006,0.011l-0.005,-0.011l0.001,0.004l0.011,0.022l-0.011,-0.021l0.001,0.003l0.015,0.03l-0.014,-0.028l0.001,0.002l0.016,0.034l-0.012,-0.024l0.014,0.03l-0.012,-0.026l0.012,0.029l-0.012,-0.028l0.011,0.027l-0.013,-0.03l0.01,0.027l-0.012,-0.033l0.009,0.026l-0.012,-0.034l-0.001,0l0.008,0.023l-0.009,-0.026l-0.001,-0.002l0.005,0.015l-0.005,-0.016l-0.002,-0.005l0,0.003l0,-0.003l-0.005,-0.01l-0.005,-0.01l-0.007,-0.014l-0.008,-0.015l-0.011,-0.019l-0.012,-0.021l-0.013,-0.023l-0.016,-0.026l-0.018,-0.027l-0.019,-0.03l-0.022,-0.032l-0.023,-0.034l-0.025,-0.036l-0.028,-0.038l-0.029,-0.039l-0.031,-0.041l-0.033,-0.042l-0.036,-0.044l-0.044,-0.054l-0.039,-0.047l-0.041,-0.048l-0.043,-0.049l-0.045,-0.051l-0.047,-0.051l-0.049,-0.053l-0.05,-0.053l0.033,0.034l-0.085,-0.088Z`;

    function createParticle(startFromBottom = true): Particle {
      const rect = playground.getBoundingClientRect();
      const size = 40 + Math.random() * 40;

      const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      svg.setAttribute('viewBox', '0 0 256 256');
      svg.setAttribute('width', size.toString());
      svg.setAttribute('height', size.toString());
      svg.classList.add('logo-particle');

      // Add main path
      const path1 = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      path1.setAttribute('d', mainPath);
      svg.appendChild(path1);

      // Add handle path
      const path2 = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      path2.setAttribute('d', handlePath);
      svg.appendChild(path2);

      playground.appendChild(svg);

      const baseX = Math.random() * rect.width;
      return {
        el: svg,
        x: baseX,
        y: startFromBottom ? rect.height + size : Math.random() * rect.height,
        baseX,
        size,
        baseOpacity: 0.15 + Math.random() * 0.35,
        riseSpeed: 0.3 + Math.random() * 0.5,
        driftAmplitude: 15 + Math.random() * 25,
        driftFrequency: 0.5 + Math.random() * 1,
        phase: Math.random() * Math.PI * 2,
        rotation: Math.random() * 360,
        rotationSpeed: (Math.random() - 0.5) * 0.5
      };
    }

    // Create initial particles distributed across height
    const rect = playground.getBoundingClientRect();
    for (let i = 0; i < PARTICLE_COUNT; i++) {
      const p = createParticle(false);
      p.y = (i / PARTICLE_COUNT) * rect.height + Math.random() * 50;
      particles.push(p);
    }

    let mouseX = -1000;
    let mouseY = -1000;
    let time = 0;

    playground.addEventListener('mousemove', (e) => {
      const r = playground.getBoundingClientRect();
      mouseX = e.clientX - r.left;
      mouseY = e.clientY - r.top;
    });

    playground.addEventListener('mouseleave', () => {
      mouseX = -1000;
      mouseY = -1000;
    });

    function animate() {
      time += 0.016;
      const rect = playground.getBoundingClientRect();

      particles.forEach((p) => {
        // Rise upward
        p.y -= p.riseSpeed;

        // Horizontal drift (sine wave)
        const drift = Math.sin(time * p.driftFrequency + p.phase) * p.driftAmplitude;
        p.x = p.baseX + drift;

        // Mouse repulsion
        if (mouseX > 0 && mouseY > 0) {
          const dx = p.x - mouseX;
          const dy = p.y - mouseY;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < 80) {
            const force = (80 - dist) / 80 * 15;
            p.x += (dx / dist) * force;
          }
        }

        // Gentle rotation
        p.rotation += p.rotationSpeed;

        // Opacity based on vertical position (fade near top)
        const heightRatio = p.y / rect.height;
        const opacity = p.baseOpacity * Math.min(1, heightRatio * 1.5);

        // Reset when reaching top
        if (p.y < -p.size) {
          p.y = rect.height + p.size;
          p.baseX = Math.random() * rect.width;
          p.x = p.baseX;
          p.phase = Math.random() * Math.PI * 2;
        }

        // Keep within horizontal bounds
        p.x = Math.max(0, Math.min(rect.width - p.size, p.x));

        // Apply styles
        p.el.style.opacity = opacity.toString();
        p.el.style.transform = `translate(${p.x - p.size/2}px, ${p.y - p.size/2}px) rotate(${p.rotation}deg)`;
      });

      requestAnimationFrame(animate);
    }

    animate();
  }

  // Initialize on load and page transitions
  initLogoAnimation();
  document.addEventListener('astro:page-load', initLogoAnimation);
</script>
