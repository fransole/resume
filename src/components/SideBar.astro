---
import SideBarFooter from "./SideBarFooter.astro";
import { Image } from "astro:assets";
import SideBarMenu from "./SideBarMenu.astro";
import profileImg from "../images/john-dorion.jpg";
const base = import.meta.env.BASE_URL;
---

<div class="drawer-side z-40">
  <label for="my-drawer" class="drawer-overlay"></label>
  <aside class="px-2 pt-2 h-auto min-h-full w-[19rem] bg-base-200 text-base-content flex flex-col relative">
    <div id="logo-playground"></div>
    <div class="w-fit mx-auto mt-5 mb-6 relative z-10">
      <a href={base}>
        <div class="avatar transition ease-in-out hover:scale-[102%] block m-auto">
          <div class="w-[8.5rem]">
            <Image class="mask mask-circle" format="webp" quality={80} loading="eager" width={300} height={300} src={profileImg} alt="John Dorion" />
          </div>
        </div>
      </a>
    </div>
    <div class="relative z-10">
      <SideBarMenu />
    </div>
    <div class="flex-grow"></div>
    <div class="relative z-10">
      <SideBarFooter />
    </div>
  </aside>
</div>

<style>
  #logo-playground {
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: 0;
    pointer-events: auto;
  }

  #logo-playground :global(.logo-particle) {
    position: absolute;
    pointer-events: auto;
    will-change: transform, opacity, filter;
    cursor: default;
    transition: filter 0.3s ease, opacity 0.3s ease;
  }

  #logo-playground :global(.logo-particle:hover) {
    opacity: 0.9 !important;
    filter: drop-shadow(0 0 6px rgba(255, 220, 100, 0.9)) drop-shadow(0 0 14px rgba(255, 200, 50, 0.7));
  }

  #logo-playground :global(.logo-particle path) {
    fill: #C0A36E;
    fill-rule: evenodd;
    transition: fill 0.3s ease;
  }

  #logo-playground :global(.logo-particle:hover path) {
    fill: #D9C285;
  }
</style>

<script>
  import { setupAnimationEvents } from '../scripts/logoAnimation';
  setupAnimationEvents();
</script>
